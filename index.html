<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSGN LABS Web Builder - AI-Powered Website Creation in Minutes</title>
    <meta name="description" content="Create a professional website with AI in minutes. Chat with Danny, our AI expert, get instant previews, and launch your site with lifetime hosting for just $50.">
    <link rel="stylesheet" href="https://convert.yourdsgn.pro/dsgn-style.css">
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; }
        
        /* Header Section */
.header-section {
    color: white;
    height: 100vh; 
    /* FIX 1: Changed path to /DSGN_grey_back.jpg
      This tells the browser to find the image starting from your website's root folder.
    */
    background: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.25)), url('./DSGN_grey_back.png');
    background-size: cover;
    background-position: center;
    /* --- LAYOUT FIX --- */
    display: flex;
    flex-direction: column; /* This stacks your items (logo, text, button) vertically */
    justify-content: center; /* This centers the stack vertically */
    align-items: center;     /* This centers the stack horizontally */
    text-align: center; /* Ensures text inside the items is also centered */
    padding: 20px; 
}
        .logo { 
            max-width: 600px; 
            width: 100%;
            height: auto;
            margin: 0 auto 30px;
            display: block;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .header-section h1 { 
            font-size: 48px; 
            margin: 0 0 20px; 
            font-weight: 700;
            text-shadow: 0 0 8px rgba(255, 255, 255, 1);
        }
        .header-section .subtitle { 
            font-size: 24px; 
            margin: 0 0 30px; 
            opacity: 0.95;
        }
        .cta-button {
            display: inline-block;
            padding: 18px 40px;
            background: white;
            color: #000000;
            text-decoration: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: 600;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Content Section */
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }
        .content-section {
            margin-bottom: 60px;
        }
        .content-section h2 {
            font-size: 36px;
            color: #fff;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .content-section h3 {
            font-size: 24px;
            color: #ffffff;
            margin: 30px 0 15px;
        }
        .content-section p {
            font-size: 18px;
            line-height: 1.8;
            color: #eeeeee;
            margin-bottom: 20px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        .feature-card {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .feature-card h3 {
            margin-top: 0;
            color: #667eea;
        }
        .pricing-box {
            background: linear-gradient(rgba(0, 0, 0, 0.50), rgba(0, 0, 0, 0.50)), url('./DSGN_blue_back.png');
            color: white;
            padding: 40px;
            background-position: center;
            border-radius: 12px;
            text-align: center;
            margin: 40px 0;
        }
        .pricing-box .price {
            font-size: 72px;
            font-weight: 700;
            margin: 20px 0;
        }
        .pricing-box ul {
            list-style: none;
            padding: 0;
            text-align: left;
            max-width: 500px;
            margin: 30px auto;
        }
        .pricing-box li {
            padding: 10px 0;
            font-size: 18px;
        }
        .pricing-box li:before {
            content: "✓ ";
            font-weight: bold;
            margin-right: 10px;
        }

        /* Form Section */
        #form-section { 
            max-width: 700px; 
            margin: 60px auto; 
            padding: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        #form-section h2 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
        }
        .form-group { 
            margin-bottom: 25px; 
        }
        .form-group label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600;
            color: #000;
            font-size: 16px;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group textarea { 
            width: 100%; 
            padding: 14px; 
            border: 2px solid #ddd; 
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .form-group input[type="color"] {
            width: 100%;
            height: 60px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
        }
        .form-group input[type="file"] {
            width: 100%;
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            cursor: pointer;
        }
        .form-group textarea { 
            min-height: 120px; 
            resize: vertical; 
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .checkbox-group input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
        }
        
        /* Hidden class */
        .hidden { 
            display: none !important; 
        }
        
        /* Chat Section */
        #chat-section { 
            display: flex; 
            gap: 30px; 
            margin-top: 40px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;
        }
        #chat-container { 
            flex: 1; 
            max-width: 600px; 
        }
        #chat-messages { 
            border: 2px solid #ddd; 
            border-radius: 12px; 
            height: 500px; 
            overflow-y: auto; 
            padding: 20px; 
            margin-bottom: 15px; 
            background: #f9f9f9; 
        }
        .message { 
            margin-bottom: 20px; 
            padding: 15px; 
            border-radius: 8px; 
            color: #fff !important; 
            line-height: 1.6;
        }
        .message.danny { 
            background: #e3f2fd; 
            border-left: 4px solid #2196F3;
        }
        .message.user { 
            background: #f5f5f5; 
            text-align: right;
            border-right: 4px solid #667eea;
        }
        .message strong { 
            display: block; 
            margin-bottom: 8px;
            font-size: 14px;
            opacity: 0.8;
        }
        .ai-thinking {
            display: none;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #ffc107;
        }
        .ai-thinking.active {
            display: flex;
        }
        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #chat-input { 
            width: 100%; 
            padding: 14px; 
            border: 2px solid #ddd; 
            border-radius: 8px;
            font-size: 16px;
        }
        
        /* Preview Section */
        #preview-container { 
            flex: 2; 
        }
        #preview-frame { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ddd; 
            border-radius: 12px; 
            background: white; 
        }
        
        /* Buttons */
        button { 
            padding: 14px 32px; 
            background: #667eea; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 18px;
            font-weight: 600;
            transition: background 0.3s, transform 0.2s;
        }
        button:hover { 
            background: #5568d3;
            transform: translateY(-2px);
        }
        button:disabled { 
            background: #ccc; 
            cursor: not-allowed;
            transform: none;
        }
        .secondary-btn {
            background: #6c757d;
            margin-left: 10px;
        }
        .secondary-btn:hover {
            background: #5a6268;
        }
        
        .loading { opacity: 0.6; pointer-events: none; }
        .error { color: #dc3545; margin-top: 15px; font-weight: 600; }
        .success { color: #28a745; margin-top: 15px; font-weight: 600; }

        /* Full Screen Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            position: relative;
            width: 95%;
            height: 95%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .modal-close:hover {
            background: #c82333;
        }
        #fullscreen-frame {
            width: 100%;
            height: 100%;
            border: none;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.2;
            pointer-events: none;
            z-index: 9998;
            max-width: 80%;
            max-height: 80%;
        }

        /* Payment Section */
        #payment-section {
            max-width: 800px;
            margin: 60px auto;
            padding: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }
        #payment-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-section h1 { font-size: 32px; }
            .header-section .subtitle { font-size: 18px; }
            .logo { max-width: 90%; }
            #chat-section { flex-direction: column; }
            #chat-container { max-width: 100%; }
            .feature-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header-section">
        <img src="/DSGN.png" alt="DSGN LABS" class="logo">
        <h1>AI-Powered Website Builder</h1>
        <p class="subtitle">Create Your Professional Website in Minutes</p>
        <a href="#get-started" class="cta-button">Get Started Free</a>
    </div>

    <!-- SEO Content -->
    <div class="content-wrapper">
        <div class="content-section">
            <h2>Transform Your Business with AI-Powered Web Design</h2>
            <p>Welcome to DSGN LABS Web Builder, the revolutionary platform that combines artificial intelligence with professional web design to create stunning, fully functional websites in minutes instead of weeks. Whether you're a small business owner, freelancer, entrepreneur, or creative professional, our AI assistant Danny makes website creation as simple as having a conversation.</p>
            <p>Gone are the days of struggling with complicated website builders, hiring expensive developers, or settling for cookie-cutter templates. DSGN LABS Web Builder uses cutting-edge AI technology to understand your unique business needs and craft a custom website that perfectly represents your brand, engages your audience, and drives results.</p>
        </div>

        <div class="content-section">
            <h2>How DSGN LABS Web Builder Works</h2>
            <p>Our innovative process makes website creation accessible to everyone, regardless of technical experience. Here's how we turn your vision into reality:</p>
            
            <h3>Step 1: Tell Us About Your Business</h3>
            <p>Start by filling out a simple form with basic information about your business. You'll provide your business name, a catchy tagline that captures what you do, your brand colors, and a brief description of your services or products. If you have a logo, you can upload it too! This initial information helps Danny, our AI expert, understand your brand identity and business goals.</p>

            <h3>Step 2: Chat with Danny, Your AI Web Designer</h3>
            <p>Once you've submitted your information, you'll enter into a conversation with Danny, our intelligent AI assistant trained specifically in web design and user experience. Danny will ask you five carefully selected questions to dive deeper into your needs. These questions cover important aspects like what pages your website needs, your primary call-to-action, your preferred layout style, and the overall feeling you want your site to convey.</p>
            <p>Danny's questions are conversational and easy to answer. There's no technical jargon, no confusing choices. Just natural conversation about your business. This approach ensures that the final website truly reflects your vision and serves your specific business objectives.</p>

            <h3>Step 3: Watch Your Website Come to Life</h3>
            <p>After Danny gathers all the necessary information, the AI goes to work building your website in real-time. Within moments, you'll see a complete, professional website appear in the preview window. The site includes all the pages you discussed, incorporates your brand colors and logo, features your content, and includes modern design elements like mobile responsiveness and smooth animations.</p>
            <p>But we don't stop there. You can continue chatting with Danny to make adjustments. Want your logo centered instead of left-aligned? Just ask. Need the services section to use a different layout? Tell Danny. Prefer different button colors? No problem. Danny will regenerate your site with each change, giving you complete creative control without any coding required.</p>

            <h3>Step 4: Preview in Full Screen</h3>
            <p>Before making your final decision, you can view your website in a full-screen preview mode. This gives you a realistic sense of how your site will look to actual visitors. The preview is protected to ensure your custom design remains secure during the design process, but you'll be able to see every detail clearly and make informed decisions about any final tweaks.</p>

            <h3>Step 5: Publish and Go Live</h3>
            <p>When you're completely satisfied with your website, simply click the approval button. You'll be presented with our simple pricing options, complete the secure payment process, and receive immediate access to download your website files. Within three business days, we'll also have your free lifetime hosting set up, and you'll receive your live website URL via email.</p>
        </div>

        <div class="content-section">
            <h2>Why Choose DSGN LABS Web Builder?</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>🤖 AI-Powered Design</h3>
                    <p style="color: #1E2B41;">Our advanced AI doesn't just use templates. It creates unique, custom designs tailored specifically to your business needs, brand identity, and industry best practices.</p>
                </div>
                <div class="feature-card">
                    <h3>⚡ Lightning Fast</h3>
                    <p style="color: #1E2B41;">Get a complete, professional website in minutes, not months. What used to take weeks of back-and-forth with designers now happens in a single session.</p>
                </div>
                <div class="feature-card">
                    <h3>💰 Transparent Pricing</h3>
                    <p style="color: #1E2B41;">No hidden fees, no monthly subscriptions that add up over time. One flat fee of $50 includes your custom website, downloadable files, and optional lifetime hosting.</p>
                </div>
                <div class="feature-card">
                    <h3>📱 Mobile Responsive</h3>
                    <p style="color: #1E2B41;">Every website we create automatically looks perfect on phones, tablets, and desktop computers. Your visitors get a great experience on any device.</p>
                </div>
                <div class="feature-card">
                    <h3>🎨 Fully Customizable</h3>
                    <p style="color: #1E2B41;">Make unlimited changes during the design process. Danny will adjust anything you want until your website is exactly how you envision it.</p>
                </div>
                <div class="feature-card">
                    <h3>🔒 Secure & Fast</h3>
                    <p style="color: #1E2B41;">Your website is built using modern, clean code with no unnecessary bloat. This means faster loading times, better security, and improved search engine rankings.</p>
                </div>
                <div class="feature-card">
                    <h3>📥 Own Your Files</h3>
                    <p style="color: #1E2B41;">Download all your website files immediately after payment. You own everything and can host it anywhere you choose, giving you complete freedom and control.</p>
                </div>
                <div class="feature-card">
                    <h3>🌐 Professional Quality</h3>
                    <p style="color: #1E2B41;">Get the same quality websites that professional agencies charge thousands of dollars for, but at a fraction of the cost and time investment.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>Simple, Transparent Pricing</h2>
            <div class="pricing-box">
                <h3>Everything You Need</h3>
                <div class="price">$50</div>
                <p style="font-size: 20px; margin: 0;">One-time payment. No recurring fees.</p>
                <ul>
                    <li>Unlimited design revisions during creation</li>
                    <li>Complete conversation with Danny, our AI expert</li>
                    <li>Custom-designed, professional website</li>
                    <li>Mobile-responsive design (looks great on all devices)</li>
                    <li>All website files delivered immediately</li>
                    <li>Optional free lifetime hosting (setup within 3 business days)</li>
                    <li>Download files available for 3 days after payment</li>
                    <li>Email support for technical questions</li>
                    <li>Own all rights to your website code and design</li>
                </ul>
                <p style="margin-top: 30px; font-size: 16px; opacity: 0.9;">The entire design process is 100% free. You only pay when you're completely satisfied and ready to publish.</p>
            </div>
        </div>

        <div class="content-section">
            <h2>Hosting Options</h2>
            <p>When you purchase your website, you have two flexible options to choose from:</p>
            
            <h3>Option 1: Free Lifetime Hosting</h3>
            <p>Choose our free lifetime hosting option and we'll handle everything for you. Within three business days of payment, we'll set up your website on our high-performance hosting infrastructure powered by Cloudflare Pages. You'll receive a professional URL where your site will be live and accessible to the world. This hosting is included free for life with your $50 purchase, with no monthly fees, no renewal costs, and no surprise charges. Your site will benefit from global CDN distribution, automatic HTTPS security, and 99.9% uptime guarantee.</p>

            <h3>Option 2: Self-Hosting</h3>
            <p>If you prefer to host your website yourself, perhaps you already have hosting or want to use a specific provider, that's perfectly fine too! You'll receive all your website files immediately after payment, complete with simple deployment instructions. Your website is built as a static site, which means it can be hosted anywhere: your own hosting account, Netlify, Vercel, GitHub Pages, or any other hosting service you prefer. The same $50 price applies regardless of your hosting choice because you're paying for the custom design and AI-powered creation process.</p>

            <h3>File Availability</h3>
            <p>After payment, you'll receive an email with a secure download link for your website files. This link remains active for three full days, giving you plenty of time to download your files multiple times if needed. After three days, the download link expires for security purposes. If you've chosen our free hosting option, your site will already be live by then. If you're self-hosting and need the files again after expiration, simply contact our support team and we'll be happy to assist you.</p>
        </div>

        <div class="content-section">
            <h2>What You Get</h2>
            <p>Your DSGN LABS website includes everything you need for a professional online presence:</p>
            <p><strong>Complete HTML/CSS/JavaScript files:</strong> Your website is delivered as clean, modern, hand-crafted code that loads quickly and performs beautifully. All styling and functionality is included in easy-to-understand files.</p>
            <p><strong>Mobile-responsive design:</strong> Your site automatically adapts to look perfect on smartphones, tablets, laptops, and desktop computers. Over 60% of web traffic comes from mobile devices, and your site will be ready for all of them.</p>
            <p><strong>Custom color scheme:</strong> Your brand colors are integrated throughout the design, creating a cohesive look that reinforces your brand identity on every page.</p>
            <p><strong>Professional layout:</strong> Clean, modern design that follows current web design best practices and user experience principles. Your site will look like it was created by a professional agency.</p>
            <p><strong>Optimized for speed:</strong> Fast-loading websites rank better in search engines and keep visitors engaged. Your site is built with performance in mind from the ground up.</p>
            <p><strong>SEO-friendly structure:</strong> Proper HTML structure, meta tags, and semantic markup help search engines understand and rank your content effectively.</p>
            <p><strong>Ready to customize further:</strong> If you know HTML/CSS or work with a developer, the clean code makes future customizations easy. You're never locked into our system.</p>
        </div>

        <div class="content-section">
            <h2>Perfect for Every Business</h2>
            <p>DSGN LABS Web Builder serves businesses and professionals across all industries. Our AI adapts to your specific needs, whether you're a local restaurant needing a menu and contact information, a consultant showcasing your services and testimonials, a photographer displaying your portfolio, a retail store highlighting your products, or a service provider explaining what you offer. Small businesses love our affordable pricing and quick turnaround. Freelancers appreciate the professional results without the professional price tag. Entrepreneurs value the speed that lets them launch quickly and test their ideas. Non-profits benefit from our simple process that doesn't require technical staff.</p>
        </div>

        <div class="content-section">
            <h2>The Technology Behind DSGN LABS</h2>
            <p>DSGN LABS Web Builder is powered by advanced artificial intelligence technology specifically trained in web design, user experience, and modern development practices. Danny, our AI assistant, understands design principles, color theory, layout best practices, and how to create websites that convert visitors into customers. Unlike simple template systems, our AI generates truly custom code for each website, considering your unique business needs, industry standards, and target audience.</p>
            <p>The websites we create use modern web standards including HTML5, CSS3, and vanilla JavaScript. This means they're fast, secure, and compatible with all modern browsers. We don't rely on heavy frameworks or unnecessary libraries that slow down your site. Every line of code serves a purpose, resulting in lean, efficient websites that load quickly and perform excellently.</p>
            <p>Our infrastructure is built on Cloudflare Pages, one of the world's fastest and most reliable hosting platforms. When you choose our lifetime hosting option, your website benefits from global content delivery network distribution, automatic HTTPS encryption, DDoS protection, and edge caching that makes your site lightning-fast for visitors anywhere in the world.</p>
        </div>

        <div class="content-section">
            <h2>Ready to Build Your Website?</h2>
            <p>Join thousands of businesses who have already discovered the easiest way to create a professional website. The entire design process is completely free. You'll only pay the one-time $50 fee when you're absolutely satisfied with your website and ready to publish. There's no risk, no commitment, and no credit card required to start.</p>
            <p>Simply fill out the form below to begin your conversation with Danny. In just a few minutes, you'll see your custom website take shape before your eyes. If you love it, great! If you want changes, just ask. It's that simple.</p>
        </div>
    </div>

    <!-- Form Section -->
    <div id="form-section">
        <h2 id="get-started">Start Building Your Website</h2>
        <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" id="email" placeholder="your@email.com" required>
        </div>
        <div class="form-group">
            <label for="businessName">Business Name *</label>
            <input type="text" id="businessName" placeholder="Your Business Name" required>
        </div>
        <div class="form-group">
            <label for="tagline">Tagline *</label>
            <input type="text" id="tagline" placeholder="Your business in one powerful sentence" required>
        </div>
        <div class="form-group">
            <label for="logoFile">Logo File (optional)</label>
            <input type="file" id="logoFile" accept="image/*">
        </div>
        <div class="form-group">
            <label for="primaryColor">Primary Brand Color *</label>
            <input type="color" id="primaryColor" value="#667eea">
        </div>
        <div class="form-group">
            <label for="secondaryColor">Secondary Brand Color *</label>
            <input type="color" id="secondaryColor" value="#764ba2">
        </div>
        <div class="form-group">
            <label for="description">Business Description *</label>
            <textarea id="description" placeholder="Tell us about your business, your services, what makes you unique, and what you want your website to accomplish..." required></textarea>
        </div>
        <div class="form-group">
            <div class="checkbox-group">
                <input type="checkbox" id="wantHosting" checked>
                <label for="wantHosting">Yes, I want free lifetime hosting (setup within 3 business days)</label>
            </div>
        </div>
        <button id="start-btn" onclick="startBuilding()">Start Building with Danny</button>
        <div id="form-error" class="error"></div>
    </div>

    <!-- Chat Section -->
    <div id="chat-section" class="hidden">
        <div id="chat-container">
            <h3>Chat with Danny</h3>
            <div class="ai-thinking" id="ai-thinking">
                <div class="spinner"></div>
                <span>Danny is thinking...</span>
            </div>
            <div id="chat-messages"></div>
            <input type="text" id="chat-input" placeholder="Type your response..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button onclick="sendMessage()" style="margin-top: 10px; width: 100%;">Send</button>
            <div id="chat-error" class="error"></div>
        </div>
        
        <div id="preview-container">
            <h3>Preview</h3>
            <iframe id="preview-frame"></iframe>
            <div style="margin-top: 15px;">
                <button onclick="openFullscreen()" class="secondary-btn">View Full Screen</button>
                <button id="approve-btn" onclick="approveDesign()">I Love It! Ready to Publish</button>
            </div>
        </div>
    </div>

    <!-- Fullscreen Modal -->
    <div id="fullscreen-modal" class="modal">
        <button class="modal-close" onclick="closeFullscreen()">Close Preview</button>
        <div class="modal-content">
            <img src="/DSGN.png" alt="Watermark" class="watermark">
            <iframe id="fullscreen-frame"></iframe>
        </div>
    </div>

    <!-- Payment Section -->
    <div id="payment-section" class="hidden">
        <h2>Almost There!</h2>
        <p style="font-size: 18px;">The design process with Danny is always free. When you're ready to go live, you can download all the website files and get your site published for a one-time payment of $50.</p>
        <p style="font-size: 16px; color: #666; margin: 20px 0;">Your website files will be available for download for 3 days after payment.</p>
        <button id="payment-btn" onclick="initiatePayment()">Proceed with Payment ($50)</button>
        <div id="payment-status"></div>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        let sessionData = {
            email: '',
            businessName: '',
            tagline: '',
            logo: null,
            primaryColor: '',
            secondaryColor: '',
            description: '',
            wantHosting: true,
            conversationHistory: [],
            generatedSite: null,
            siteVersion: 0
        };

        async function startBuilding() {
            const email = document.getElementById('email').value.trim();
            const businessName = document.getElementById('businessName').value.trim();
            const tagline = document.getElementById('tagline').value.trim();
            const description = document.getElementById('description').value.trim();
            const primaryColor = document.getElementById('primaryColor').value;
            const secondaryColor = document.getElementById('secondaryColor').value;
            const logoFile = document.getElementById('logoFile').files[0];
            const wantHosting = document.getElementById('wantHosting').checked;

            if (!email || !businessName || !tagline || !description) {
                document.getElementById('form-error').textContent = 'Please fill in all required fields';
                return;
            }

            // Basic email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                document.getElementById('form-error').textContent = 'Please enter a valid email address';
                return;
            }

            document.getElementById('start-btn').disabled = true;
            document.getElementById('start-btn').textContent = 'Starting...';

            // Convert logo to base64 if provided
            if (logoFile) {
                sessionData.logo = await fileToBase64(logoFile);
            }

            sessionData.email = email;
            sessionData.businessName = businessName;
            sessionData.tagline = tagline;
            sessionData.primaryColor = primaryColor;
            sessionData.secondaryColor = secondaryColor;
            sessionData.description = description;
            sessionData.wantHosting = wantHosting;

            // Hide form, show chat
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('chat-section').classList.remove('hidden');

            // Scroll to chat
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Initialize conversation with Danny
            await initializeConversation();
        }

        async function initializeConversation() {
            const initialPrompt = `Business Name: ${sessionData.businessName}
Industry/Type: Based on description
Tagline: ${sessionData.tagline}
Colors: Primary ${sessionData.primaryColor}, Secondary ${sessionData.secondaryColor}
Logo: ${sessionData.logo ? 'Provided' : 'Not provided'}
Description: ${sessionData.description}
Hosting Preference: ${sessionData.wantHosting ? 'Wants free lifetime hosting' : 'Will self-host'}`;

            addMessage('user', initialPrompt);
            await callDanny('START', initialPrompt);
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;

            input.value = '';
            input.disabled = true;
            addMessage('user', message);
            await callDanny('CHAT', message);
            input.disabled = false;
            input.focus();
        }

        async function callDanny(type, message) {
            try {
                const thinkingIndicator = document.getElementById('ai-thinking');
                thinkingIndicator.classList.add('active');
                document.getElementById('chat-messages').classList.add('loading');
                
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type,
                        message,
                        sessionData
                    })
                });

                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || 'Failed to communicate with Danny');

                addMessage('danny', data.response);
                sessionData.conversationHistory = data.conversationHistory;

                // If site was generated, update preview
                if (data.siteHTML) {
                    sessionData.generatedSite = data.siteHTML;
                    sessionData.siteVersion++;
                    updatePreview(data.siteHTML);
                }

            } catch (error) {
                document.getElementById('chat-error').textContent = error.message;
            } finally {
                document.getElementById('ai-thinking').classList.remove('active');
                document.getElementById('chat-messages').classList.remove('loading');
            }
        }

        function addMessage(sender, text) {
            const messagesDiv = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `<strong>${sender === 'danny' ? 'Danny' : 'You'}:</strong>${text.replace(/\n/g, '<br>')}`;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function updatePreview(html) {
            const iframe = document.getElementById('preview-frame');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            iframeDoc.open();
            iframeDoc.write(html);
            iframeDoc.close();

            // Disable right-click and inspect
            iframe.contentWindow.document.addEventListener('contextmenu', e => e.preventDefault());
            iframe.contentWindow.document.addEventListener('keydown', e => {
                if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.shiftKey && e.key === 'C')) {
                    e.preventDefault();
                }
            });
        }

        function openFullscreen() {
            if (!sessionData.generatedSite) return;
            
            const modal = document.getElementById('fullscreen-modal');
            const fullscreenFrame = document.getElementById('fullscreen-frame');
            const iframeDoc = fullscreenFrame.contentDocument || fullscreenFrame.contentWindow.document;
            
            iframeDoc.open();
            iframeDoc.write(sessionData.generatedSite);
            iframeDoc.close();

            // Disable right-click and inspect in fullscreen
            fullscreenFrame.contentWindow.document.addEventListener('contextmenu', e => e.preventDefault());
            fullscreenFrame.contentWindow.document.addEventListener('keydown', e => {
                if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.shiftKey && e.key === 'C') || (e.metaKey && e.altKey && e.key === 'I')) {
                    e.preventDefault();
                }
            });

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeFullscreen() {
            const modal = document.getElementById('fullscreen-modal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Close modal on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeFullscreen();
            }
        });

        async function approveDesign() {
            document.getElementById('chat-section').classList.add('hidden');
            document.getElementById('payment-section').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        async function initiatePayment() {
            try {
                document.getElementById('payment-btn').disabled = true;
                document.getElementById('payment-status').innerHTML = '<p>Redirecting to secure payment...</p>';

                const response = await fetch('/api/create-checkout', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: sessionData.email,
                        businessName: sessionData.businessName,
                        siteHTML: sessionData.generatedSite,
                        wantHosting: sessionData.wantHosting
                    })
                });

                const data = await response.json();
                
                if (!response.ok) throw new Error(data.error || 'Payment initialization failed');

                // Redirect to Stripe
                const stripe = Stripe(data.publishableKey);
                await stripe.redirectToCheckout({ sessionId: data.sessionId });

            } catch (error) {
                document.getElementById('payment-status').innerHTML = `<p class="error">${error.message}</p>`;
                document.getElementById('payment-btn').disabled = false;
            }
        }

        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }
    </script>
</body>
</html>
